name: Timed Link Scheduler

on:
  schedule:
    # 9:00 PM IST â†’ 15:30 UTC (Activate)
    - cron: '30 15 * * *'

    # 12:00 AM IST â†’ 18:30 UTC (Deactivate)
    - cron: '30 18 * * *'

  workflow_dispatch:

jobs:
  toggle:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Decide page based on trigger time
        run: |
          UTC_HOUR=$(date -u +"%H")
          UTC_MIN=$(date -u +"%M")

          if [ "$UTC_HOUR" -eq 15 ] && [ "$UTC_MIN" -eq 30 ]; then
            echo "ðŸŸ¢ Activating exam"
            cp exam.html index.html
          else
            echo "ðŸ”´ Deactivating exam"
            cp inactive.html index.html
          fi

      - name: Commit & push
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add index.html
          git commit -m "Auto switch exam page" || echo "No changes"
          git push
